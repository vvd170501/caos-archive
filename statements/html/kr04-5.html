<html>
 <head>
  <meta charset="utf-8"/>
 </head>
 <body>
  <table border="1">
   <tr>
    <td>
     <b>
      Time limit:
     </b>
    </td>
    <td>
     <tt>
      1 s
     </tt>
    </td>
   </tr>
   <tr>
    <td>
     <b>
      Real time limit:
     </b>
    </td>
    <td>
     <tt>
      5 s
     </tt>
    </td>
   </tr>
   <tr>
    <td>
     <b>
      Memory limit:
     </b>
    </td>
    <td>
     <tt>
      64M
     </tt>
    </td>
   </tr>
  </table>
  <h3>
   Problem kr04-5: kr04-5
  </h3>
  <p>
  </p>
  <p>
   На языке Си напишите функцию
  </p>
  <pre>typedef uint32_t (*sumfunc_t)(void);
sumfunc_t generate(void *buf, size_t bufsize, uint32_t *array, size_t size);</pre>
  <p>
   Эта функция должна разместить по адресу
   <tt>
    buf
   </tt>
   подпрограмму,
которая просуммирует элементы массива
   <tt>
    array
   </tt>
   ,
который имеет
   <tt>
    size
   </tt>
   элементов.
  </p>
  <p>
   Параметр
   <tt>
    bufsize
   </tt>
   — размер буфера
   <tt>
    buf
   </tt>
   . Гарантируется,
что он не меньше одной страницы (4 KiB).
  </p>
  <p>
   Функция generate возвращает указатель на функцию (обозначим его
   <tt>
    func
   </tt>
   ),
для которого выполняется
   <tt>
    (void*) ret == buf
   </tt>
   . То есть функция возвращает
указатель
   <tt>
    buf
   </tt>
   , преобразовывая его к типу указателя на функцию.
  </p>
  <p>
   Обратите внимание, что адрес начала суммируемого массива
и количество элементов в нем должны быть “зашиты”
в код сгенерированной подпрограммы.
Сгенированная подпрограмма не должна вызывать никакие другие подпрограммы.
  </p>
 </body>
</html>