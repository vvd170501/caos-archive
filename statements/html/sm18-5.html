<html><head><meta charset="utf-8"/></head>
<body>
<table border="1"><tr><td><b>Time limit:</b></td><td><tt>1 s</tt></td></tr>
<tr><td><b>Real time limit:</b></td><td><tt>1 s</tt></td></tr>
<tr><td><b>Memory limit:</b></td><td><tt>64M</tt></td></tr>
</table>
<h3>Problem sm18-5: unix/signal/ping-pong-g</h3>
<p>В аргументах командной строки задается целое неотрицательное число N.
Родитель должен создать два процесса. Оба процесса работают
поочередно. Каждый процесс выводит на стандартный поток вывода свой порядковый номер (1 или 2)
и число, считанное из канала. Затем в канал отправляется число на 1 больше считанного.</p>
<p>Последним выводится номер соответствующего процесса и число N. После
этого процессы должны завершить свою работу. Родитель дожидается их
завершения и завершается сам с кодом 0. Допускается переслать через канал число N + 1 один раз.</p>
<p>Таким образом, если в командной строке задан параметр <tt>4</tt>, на стандартном потоке вывода должно быть выведено</p>
<pre>1 1
2 2
1 3
2 4</pre>
<p>Для организации передачи данных используйте один неименованный канал.
Данные по каналу пересылайте в текстовом виде.
Очередность записи определяется сигналом SIGUSR1. То есть, если процесс получает сигнал SIGUSR1,
он получает доступ к каналу. Запрещается посылать в канал числа, большие N, за исключением однократной пересылки N + 1 (см. выше).</p>
<p>Перед началом пересылки данных организуйте передачу через канал идентификаторов процессов, чтобы оба сына
знали PID друг друга.</p>
<p>Для работы с сигналами используйте signalfd.</p>
<p>В решении избегайте дублирования кода. В частности, напишите
функцию, которая будет общей для обоих взаимодействующих процессов
и будет выполнять основной цикл их работы.</p>
<p>Стандартный поток вывода перенаправлен в канал.</p>
</body></html>