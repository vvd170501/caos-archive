<html>
 <head>
  <meta charset="utf-8"/>
 </head>
 <body>
  <table border="1">
   <tr>
    <td>
     <b>
      Time limit:
     </b>
    </td>
    <td>
     <tt>
      1 s
     </tt>
    </td>
   </tr>
   <tr>
    <td>
     <b>
      Real time limit:
     </b>
    </td>
    <td>
     <tt>
      2 s
     </tt>
    </td>
   </tr>
   <tr>
    <td>
     <b>
      Memory limit:
     </b>
    </td>
    <td>
     <tt>
      64M
     </tt>
    </td>
   </tr>
  </table>
  <h3>
   Problem sm18-4: unix/signal/signal-a
  </h3>
  <p>
   Программе в аргументах командной строки передаются имена файлов (от 0 до 20 включительно). Файлы представляют собой именованные каналы,
по которым программе будут передаваться данные блоками по 16 байт. То есть программа должна открывать
эти файлы только на чтение и считывать данные из них блоками по 16 байт.
  </p>
  <p>
   Программа должна напечатать на стандартный поток вывода свой PID и перейти в режим ожидания поступления сигналов.
  </p>
  <p>
   При поступлении сигнала SIGTERM программа должна для каждого файла распечатать сумму чисел, считанных из него,
и завершить работу. Каждое число выводится на отдельной строке стандартного потока вывода. Если из файла не было считано чисел, их сумма равна 0.
  </p>
  <p>
   При поступлении сигнала SIGRTMIN + x программа должна переключиться в режим чтения данных из входного файла
с индексом x. То есть, например, сигнал SIGRTMIN + 2 переключает программу в режим чтения из файла с индексом 2,
путь к которому задается в аргументе командной строки argv[3]. Если этот файл уже закрыт,
то программа переходит в режим ожидания поступления сигнала.
  </p>
  <p>
   В режиме чтения входного файла программа считывает данные из текущего файла блоками по 16 байт.
Каждый блок содержит пробельные символы и текстовое представление 64-битного целого знакового числа.
Символ с индексом 15 в блоке данных является символом \n. Считанное число прибавляется к текущей сумме чисел этого файла.
Гарантируется, что для всех вычислений достаточно 64-битного знакового целого типа.
При достижении конца файла он закрывается, а программа переходит в режим ожидания поступления сигнала.
  </p>
  <p>
   Кроме того, в режиме чтения входного файла обрабатываются сигналы SIGTERM и SIGRTMIN + x как описано выше.
  </p>
  <p>
   Обработчики сигналов должны не выполнять никаких действий, кроме изменения значений глобальных переменных.
Допускается не более 3 глобальных переменных целого типа.
  </p>
  <p>
   Не используйте signalfd, select/poll/epoll и аналогичные средства, неблокирующий режим, асинхронный ввод-вывод и т. п. Не создавайте новых процессов или нитей.
Однако допускается race condition около системного вызова read.
  </p>
 </body>
</html>